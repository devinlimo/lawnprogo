<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalProGo - Home Services Platform Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Visualization & Content Choices:
        - Homepage: Zip Code input. Goal: Entry. Interaction: Zip -> Explore. Lib: JS.
        - Explore Services: Filters, Provider List. Goal: Browse/Compare. Viz: HTML/Tailwind list. Provider images are descriptive placeholders (one reflecting Gecko Green). Interaction: Filters update list. Click provider -> Provider Profile. Lib: JS.
        - Provider Profile: Provider details (incl. simulated real data for Gecko Green), photos, reviews, service/price selector. Goal: In-depth provider info. Viz: HTML/Tailwind. Interaction: Service/yard selection updates price. Book -> Booking Demo. Lib: JS.
        - Simulated Booking: Mock form. Goal: Show PII point. Interaction: Triggered from Profile. Lib: JS.
        - For Providers Page: Login, Pricing Tiers. Goal: Show provider side. Viz: HTML/Tailwind. Lib: HTML/Tailwind.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; 
            color: #343a40; 
        }
        .accent-green { color: #28a745; }
        .accent-green-bg { background-color: #28a745; }
        .accent-green-bg-hover:hover { background-color: #218838; }
        .accent-blue { color: #007bff; }
        .accent-blue-bg { background-color: #007bff; }
        .accent-blue-bg-hover:hover { background-color: #0056b3; }
        
        .section {
            padding: 48px 24px; 
        }
        .card {
            background-color: white;
            border-radius: 12px;
            padding: 28px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.07);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .button {
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            text-align: center;
        }
        .button:active {
            transform: scale(0.97);
        }

        .button-primary {
            background-color: #28a745; 
            color: white;
        }
        .button-primary:hover {
            background-color: #218838;
        }
        .button-secondary {
            background-color: #6c757d; 
            color: white;
        }
        .button-secondary:hover {
            background-color: #5a6268;
        }
        
        select, input[type="text"], input[type="email"], input[type="tel"], input[type="search"], input[type="password"] {
            border: 1px solid #ced4da; 
            padding: 12px 16px; 
            border-radius: 8px; 
            width: 100%;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            font-size: 1rem;
        }
        select:focus, input:focus {
            outline: none;
            border-color: #28a745;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.25);
        }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.5s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-bg {
             background: linear-gradient(135deg, #e0f2f7 0%, #d1e7dd 100%); 
        }
        header nav a.active-nav {
            color: #28a745;
            font-weight: 600;
            border-bottom: 2px solid #28a745;
        }
        .star-rating span {
            color: #ffc107; 
        }
        .provider-list-item {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: box-shadow 0.2s ease-in-out;
        }
        .provider-list-item:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .pricing-tier-card {
            border: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            height: 100%; 
        }
        .pricing-tier-card .features-list {
            flex-grow: 1; 
        }
        .pricing-tier-card.recommended {
            border-color: #28a745;
            border-width: 2px;
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.2);
            position: relative; 
        }
         .recommended-badge {
            position: absolute;
            top: -1px; 
            right: -1px; 
            background-color: #28a745;
            color: white;
            font-size: 0.75rem; 
            font-weight: 600;
            padding: 0.25rem 0.75rem; 
            border-top-right-radius: 10px; 
            border-bottom-left-radius: 10px;
        }
        .provider-image-placeholder, .profile-gallery-image {
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d; 
            font-size: 0.875rem;
            text-align: center;
            line-height: 1.2;
            aspect-ratio: 4/3; 
            object-fit: cover; 
            border-radius: 8px;
        }
        .profile-gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 0.75rem; 
        }
        .review-item {
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        .review-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="text-3xl font-bold site-title">
                <span class="accent-green">Local</span><span class="text-gray-800">Pro</span><span class="accent-green">Go</span>
            </a>
            <nav class="space-x-2">
                <a href="#home" class="nav-link text-gray-700 hover:accent-green px-3 py-2 rounded-md text-sm font-medium">Home</a>
                <a href="#exploreServices" class="nav-link text-gray-700 hover:accent-green px-3 py-2 rounded-md text-sm font-medium">Explore Services</a>
                <a href="#providers" class="nav-link text-gray-700 hover:accent-green px-3 py-2 rounded-md text-sm font-medium">For Providers</a>
            </nav>
        </div>
    </header>

    <main>
        <div id="homeView" class="view active">
            <section class="hero-bg py-24 md:py-36">
                <div class="container mx-auto px-6 text-center">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-800 mb-6 leading-tight">
                        Find Trusted Local Pros, <span class="accent-green">Fast</span>.
                    </h1>
                    <p class="text-lg md:text-xl text-gray-600 mb-10 max-w-3xl mx-auto">
                        Easily browse, compare, and book top-rated local professionals for lawn care, landscaping, and more with LocalProGo. Just enter your Zip Code to begin.
                    </p>
                    <form id="zipCodeForm" class="max-w-xl mx-auto flex flex-row gap-3 items-center">
                        <label for="zipCodeInput" class="sr-only">Enter Your Zip Code</label>
                        <input type="search" id="zipCodeInput" placeholder="Enter Your Zip Code (e.g., 75201)" class="flex-grow text-lg p-4 rounded-lg shadow-sm" required pattern="\d{5}" title="Enter a 5-digit Zip Code">
                        <button type="submit" class="button button-primary text-lg p-4 whitespace-nowrap">
                            <span class="mr-2">‚ûî</span>Find Services
                        </button>
                    </form>
                    <p id="zipError" class="text-red-600 text-sm mt-3 h-5 font-medium"></p> 
                </div>
            </section>

            <section id="howItWorks" class="section py-16 bg-white">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-16 text-gray-800">Getting Started with LocalProGo is Easy</h2>
                    <div class="grid md:grid-cols-3 gap-10 text-center">
                        <div class="flex flex-col items-center">
                            <div class="bg-green-100 text-green-600 rounded-full p-5 text-4xl mb-5 shadow-md">üìç</div>
                            <h3 class="text-2xl font-semibold mb-3">1. Enter Zip Code</h3>
                            <p class="text-gray-600 leading-relaxed">Tell us where you need service to instantly see available local professionals and transparent price estimates.</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="bg-blue-100 text-blue-600 rounded-full p-5 text-4xl mb-5 shadow-md">üîç</div>
                            <h3 class="text-2xl font-semibold mb-3">2. Explore & Compare</h3>
                            <p class="text-gray-600 leading-relaxed">Browse services and providers, view detailed offerings, and compare price ranges without any commitment.</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="bg-purple-100 text-purple-600 rounded-full p-5 text-4xl mb-5 shadow-md">üìÖ</div>
                            <h3 class="text-2xl font-semibold mb-3">3. Book Securely</h3>
                            <p class="text-gray-600 leading-relaxed">Choose your preferred pro, select a convenient time, and confirm your service online with ease.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="serviceCategories" class="section py-16 bg-gray-50">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-16 text-gray-800">Popular Services near you</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        <a href="#" data-service="mowing" class="category-link card items-center text-center hover:shadow-xl group">
                            <div class="text-5xl mb-4 transition-transform duration-300 group-hover:scale-110">üåø</div>
                            <h4 class="font-semibold text-xl">Lawn Mowing</h4>
                            <p class="text-sm text-gray-500 mt-1">Keep your lawn neat & tidy.</p>
                        </a>
                        <a href="#" data-service="mowingPlus" class="category-link card items-center text-center hover:shadow-xl group">
                             <div class="text-5xl mb-4 transition-transform duration-300 group-hover:scale-110">üå≥</div>
                            <h4 class="font-semibold text-xl">Landscaping</h4>
                            <p class="text-sm text-gray-500 mt-1">Design & maintain your dream yard.</p>
                        </a>
                        <a href="#" data-service="fertilization" class="category-link card items-center text-center hover:shadow-xl group">
                             <div class="text-5xl mb-4 transition-transform duration-300 group-hover:scale-110">‚ú®</div>
                            <h4 class="font-semibold text-xl">Fertilization</h4>
                            <p class="text-sm text-gray-500 mt-1">Nourish your lawn for health.</p>
                        </a>
                        <a href="#" data-service="weeding" class="category-link card items-center text-center hover:shadow-xl group">
                             <div class="text-5xl mb-4 transition-transform duration-300 group-hover:scale-110">üå±</div>
                            <h4 class="font-semibold text-xl">Weed Control</h4>
                            <p class="text-sm text-gray-500 mt-1">Keep unwanted plants away.</p>
                        </a>
                    </div>
                </div>
            </section>

            <section id="whyChooseUs" class="section py-16 bg-white">
                <div class="container mx-auto px-6">
                    <h2 class="text-3xl font-bold text-center mb-16 text-gray-800">The LocalProGo Advantage</h2>
                    <div class="grid md:grid-cols-3 gap-10">
                        <div class="card text-center">
                            <div class="text-3xl mb-4 accent-green">‚úîÔ∏è</div>
                            <h3 class="text-xl font-semibold mb-2">Vetted Local Professionals</h3>
                            <p class="text-gray-600 leading-relaxed">Connect with trusted, skilled, and insured professionals in your immediate community.</p>
                        </div>
                        <div class="card text-center">
                            <div class="text-3xl mb-4 accent-green">üí≤</div>
                            <h3 class="text-xl font-semibold mb-2">Transparent Upfront Pricing</h3>
                            <p class="text-gray-600 leading-relaxed">See estimated price ranges clearly before you commit or share any personal information.</p>
                        </div>
                        <div class="card text-center">
                            <div class="text-3xl mb-4 accent-green">üíª</div>
                            <h3 class="text-xl font-semibold mb-2">Easy Online Booking</h3>
                            <p class="text-gray-600 leading-relaxed">Schedule and manage all your home services conveniently from any device, anytime.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="exploreServicesView" class="view">
            <section id="exploreServicesContent" class="section bg-gray-100">
                <div class="container mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold mb-4 text-gray-800">Explore Local Pros</h2>
                        <p id="exploreServicesIntro" class="text-lg text-gray-600 max-w-3xl mx-auto">
                            Showing available lawn care professionals for <strong id="exploreServicesZipDisplay" class="accent-green">your selected area</strong>. 
                            Use the filters to refine your search.
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg mb-10 sticky top-20 z-40">
                        <h3 class="text-xl font-semibold mb-4 text-gray-700">Filter Services & Providers</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="filterServiceType" class="block text-sm font-medium text-gray-700 mb-1">Service Type:</label>
                                <select id="filterServiceType" class="mt-1 block w-full">
                                    <option value="all">All Lawn Services</option>
                                    <option value="mowing">Lawn Mowing (Basic)</option>
                                    <option value="mowingPlus">Landscaping (Mowing Plus)</option>
                                    <option value="fertilization">Fertilization</option>
                                    <option value="weeding">Weed Control</option>
                                </select>
                            </div>
                            <div>
                                <label for="filterYardSize" class="block text-sm font-medium text-gray-700 mb-1">Estimated YardSize:</label>
                                <select id="filterYardSize" class="mt-1 block w-full">
                                    <option value="any">Any Size</option>
                                    <option value="small">Small (under 3,000 sq ft)</option>
                                    <option value="medium">Medium (3,000 - 7,000 sq ft)</option>
                                    <option value="large">Large (7,000 - 10,000 sq ft)</option>
                                    <option value="xlarge">Extra Large (10,000+ sq ft)</option>
                                </select>
                            </div>
                            <div>
                                <label for="filterSortBy" class="block text-sm font-medium text-gray-700 mb-1">Sort By:</label>
                                <select id="filterSortBy" class="mt-1 block w-full">
                                    <option value="rating">Highest Rated</option>
                                    <option value="reviews">Most Reviews</option>
                                    <option value="name_asc">Name (A-Z)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="providerListingsContainer" class="space-y-6">
                        </div>
                    <p id="noProvidersMessage" class="text-center text-gray-500 py-10 hidden">No providers match your current filters. Try adjusting your search.</p>
                </div>
            </section>
        </div>
        
        <div id="providerProfileView" class="view">
            <section class="section bg-gray-100 py-12">
                <div class="container mx-auto">
                    <button id="backToProvidersButton" class="button button-secondary mb-8 inline-flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2">
                          <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 0 1-.02 1.06L8.832 10l3.938 3.71a.75.75 0 1 1-1.04 1.08l-4.5-4.25a.75.75 0 0 1 0-1.08l4.5-4.25a.75.75 0 0 1 1.06.02Z" clip-rule="evenodd" />
                        </svg>
                        Back to Listings
                    </button>
                    <div id="providerProfileContentContainer" class="bg-white rounded-xl shadow-xl p-6 md:p-10">
                        </div>
                </div>
            </section>
        </div>

        <div id="bookingDemoExplore" class="view">
             <section class="section bg-white py-12">
                <div class="container mx-auto text-center">
                    <button id="backToProfileButton" class="button button-secondary mb-8 float-left inline-flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2">
                          <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 0 1-.02 1.06L8.832 10l3.938 3.71a.75.75 0 1 1-1.04 1.08l-4.5-4.25a.75.75 0 0 1 0-1.08l4.5-4.25a.75.75 0 0 1 1.06.02Z" clip-rule="evenodd" />
                        </svg>
                        Back to Profile
                    </button>
                    <div class="clear-both"></div>
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Simulated Booking & Checkout</h2>
                    <p class="text-lg text-gray-600 mb-10 max-w-3xl mx-auto">
                        You're about to book with <strong id="bookingProviderName" class="accent-green"></strong>.
                        Please confirm the details below. This information is ONLY requested at the point of service confirmation.
                    </p>
                    <div class="card max-w-2xl mx-auto text-left">
                        <h3 class="text-2xl font-semibold mb-6 accent-blue">Confirm Your Service (Demo)</h3>
                        <p class="mb-2 text-md">Provider: <strong id="confirmProviderName" class="text-gray-700"></strong></p>
                        <p class="mb-2 text-md">Selected Service: <strong id="bookedServiceDisplayExplore" class="text-gray-700"></strong></p>
                        <p class="mb-2 text-md">Yard Size: <strong id="bookedYardSizeDisplayExplore" class="text-gray-700"></strong></p>
                        <p class="mb-6 text-xl">Estimated Price: <strong id="bookedPriceDisplayExplore" class="accent-green font-bold"></strong></p>
                        
                        <form id="bookingFormExplore" class="space-y-5">
                            <div>
                                <label for="addressExplore" class="block text-sm font-medium text-gray-700">Service Address:</label>
                                <input type="text" id="addressExplore" name="address" placeholder="123 Main St, Dallas, TX 75201" class="mt-1" readonly value="123 Demo St, Dallas, TX 75201">
                                <p class="text-xs text-gray-500 mt-1">GIS data might refine price based on actual lot size here.</p>
                            </div>
                            <div>
                                <label for="dateExplore" class="block text-sm font-medium text-gray-700">Preferred Date & Time:</label>
                                <input type="text" id="dateExplore" name="date" placeholder="Example: June 15th, 2025 - Morning" class="mt-1" readonly value="June 15th, 2025 - Morning Slot">
                            </div>
                            <div>
                                <label for="nameExplore" class="block text-sm font-medium text-gray-700">Full Name:</label>
                                <input type="text" id="nameExplore" name="name" placeholder="Your Full Name" class="mt-1" readonly value="Jane Doe (Demo)">
                            </div>
                            <div>
                                <label for="emailExplore" class="block text-sm font-medium text-gray-700">Email Address:</label>
                                <input type="email" id="emailExplore" name="email" placeholder="you@example.com" class="mt-1" readonly value="jane.doe@example.com">
                            </div>
                            <div>
                                <label for="phoneExplore" class="block text-sm font-medium text-gray-700">Phone Number:</label>
                                <input type="tel" id="phoneExplore" name="phone" placeholder="(555) 123-4567" class="mt-1" readonly value="(555) 123-4567">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Payment Information:</label>
                                <div class="mt-1 p-4 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 italic">
                                    Secure Payment Gateway Integration (e.g., Stripe or Braintree) would appear here.
                                </div>
                            </div>
                            <div class="flex flex-col sm:flex-row items-center justify-between mt-8 gap-4">
                                <button type="button" class="button button-primary w-full sm:w-auto">Create Account & Book (Demo)</button>
                                <button type="button" class="text-md accent-blue hover:underline font-medium">Checkout as Guest (Demo)</button>
                            </div>
                            <div id="bookingConfirmationExplore" class="mt-6 p-4 bg-green-100 border-l-4 border-green-500 text-green-700 rounded-md hidden">
                                <h4 class="font-bold text-lg">Booking Confirmed (Demo)!</h4>
                                <p>An email confirmation with your service details would be sent.</p>
                            </div>
                        </form>
                         <button id="showBookingConfirmationBtnExplore" class="button button-primary mt-6 w-full text-lg">Simulate Confirmation</button>
                    </div>
                </div>
            </section>
        </div>

        <div id="providersView" class="view">
            <section class="section bg-white">
                <div class="container mx-auto">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold mb-4 text-gray-800">Join LocalProGo as a Service Professional</h2>
                        <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                            Grow your business by connecting with homeowners in your area looking for your expertise. We provide the tools and support you need to succeed.
                        </p>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-8 items-start">
                        <div class="lg:col-span-1 card self-start">
                            <h3 class="text-2xl font-semibold mb-6 text-center accent-blue">Provider Login</h3>
                            <form id="providerLoginForm" class="space-y-6">
                                <div>
                                    <label for="providerEmail" class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" id="providerEmail" name="providerEmail" required class="mt-1" placeholder="you@yourcompany.com">
                                </div>
                                <div>
                                    <label for="providerPassword" class="block text-sm font-medium text-gray-700">Password</label>
                                    <input type="password" id="providerPassword" name="providerPassword" required class="mt-1" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                </div>
                                <div class="flex items-center justify-between">
                                    <a href="#" class="text-sm accent-blue hover:underline">Forgot password?</a>
                                </div>
                                <button type="submit" class="button button-primary w-full text-lg">Login to Provider Portal</button>
                                <p class="text-sm text-center text-gray-500 mt-4">
                                    Don't have an account? <a href="#provider-signup" class="font-medium accent-green hover:underline">Sign up here</a>
                                </p>
                            </form>
                        </div>

                        <div class="lg:col-span-2 space-y-8">
                             <h3 class="text-3xl font-semibold mb-8 text-center text-gray-800">Our Partnership Plans</h3>
                            <div class="grid md:grid-cols-1 lg:grid-cols-3 gap-8 items-stretch">
                                <div class="pricing-tier-card card">
                                    <h4 class="text-2xl font-semibold mb-3 text-gray-700">Basic Connect</h4>
                                    <p class="text-4xl font-extrabold mb-1 accent-green">$39<span class="text-lg font-medium text-gray-500">/mo</span></p>
                                    <p class="text-sm text-gray-600 mb-6 min-h-[40px]">Essential visibility to start receiving direct customer inquiries.</p>
                                    <ul class="features-list space-y-3 text-sm text-gray-700 mb-8 text-left">
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Standard Profile Listing (up to 5 services, 5 photos)</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Marketplace Visibility in your area</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Up to 12 confirmed booking requests/inquiries per month</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Basic Email Support (48hr target)</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Basic Calendar Sync</li>
                                    </ul>
                                    <div class="mt-auto pt-4">
                                        <button class="button button-primary w-full opacity-80 hover:opacity-100">Choose Basic</button>
                                    </div>
                                </div>

                                <div class="pricing-tier-card card recommended">
                                    <div class="recommended-badge">RECOMMENDED</div>
                                    <h4 class="text-2xl font-semibold mb-3 text-gray-700">Pro Growth</h4>
                                    <p class="text-4xl font-extrabold mb-1 accent-green">$79<span class="text-lg font-medium text-gray-500">/mo</span></p>
                                    <p class="text-sm text-gray-600 mb-6 min-h-[40px]">Increased visibility, more opportunities, and profile enhancement tools.</p>
                                    <ul class="features-list space-y-3 text-sm text-gray-700 mb-8 text-left">
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> All Basic Connect features, PLUS:</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Enhanced Profile (15 photos, 1 video, badge, 2 featured services)</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Priority Placement in search</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Up to 30 confirmed booking requests/inquiries per month</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Simple Performance Insights Dashboard</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Priority Email & Chat Support (24hr target)</li>
                                    </ul>
                                    <div class="mt-auto pt-4">
                                        <button class="button button-primary w-full">Choose Pro</button>
                                    </div>
                                </div>

                                <div class="pricing-tier-card card">
                                    <h4 class="text-2xl font-semibold mb-3 text-gray-700">Elite Partner</h4>
                                    <p class="text-4xl font-extrabold mb-1 accent-green">$129<span class="text-lg font-medium text-gray-500">/mo</span></p>
                                    <p class="text-sm text-gray-600 mb-6 min-h-[40px]">Maximum exposure, unlimited opportunities, and premium support.</p>
                                    <ul class="features-list space-y-3 text-sm text-gray-700 mb-8 text-left">
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> All Pro Growth features, PLUS:</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Premium Profile (unlimited photos, 3 videos, badge, 5 featured services, website link)</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Top-Tier Placement & Occasional Marketing Features</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Unlimited confirmed booking requests/inquiries (fair use policy applies)</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Advanced Analytics & Benchmarking</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Early Access to New Features</li>
                                        <li class="flex items-start"><span class="text-green-500 mr-2 mt-1 shrink-0">‚úî</span> Integrated Review Management Tools</li>
                                    </ul>
                                     <div class="mt-auto pt-4">
                                        <button class="button button-primary w-full opacity-80 hover:opacity-100">Choose Elite</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-800 text-white text-center py-10">
        <div class="container mx-auto px-6">
            <p class="mb-3 text-lg">LocalProGo</p>
            <p class="mb-4 text-sm">&copy; <span id="currentYear"></span> LocalProGo Demo. All rights reserved.</p>
            <div class="space-x-4 text-sm">
                <a href="#privacy" class="text-gray-400 hover:text-white hover:underline">Privacy Policy</a>
                <span class="text-gray-500">|</span>
                <a href="#terms" class="text-gray-400 hover:text-white hover:underline">Terms of Service</a>
                <span class="text-gray-500">|</span>
                <a href="#contact" class="text-gray-400 hover:text-white hover:underline">Contact Us</a>
            </div>
            <p class="text-xs mt-6 text-gray-500">This is an interactive demonstration SPA based on the "Homepage_TechRequirements_v1" and "LawnGenius_TechRequirements_v1" documents.</p>
        </div>
    </footer>

    <script>
        const serviceData = {
            mowing: {
                description: "Basic lawn mowing includes professional cutting of grass, precise edging along concrete surfaces (sidewalks, driveways), and blowing clippings off hardscapes for a clean finish.",
                prices: { small: "$45-$60", medium: "$55-$75", large: "$70-$95", xlarge: "$90-$120" },
                name: "Lawn Mowing (Basic)"
            },
            mowingPlus: {
                description: "Plus Package includes basic mowing, edging, blowing, plus light trimming of bushes/shrubs immediately adjacent to the house foundation (up to 6ft height).",
                prices: { small: "$65-$85", medium: "$80-$105", large: "$100-$130", xlarge: "$125-$160" },
                name: "Landscaping (Mowing Plus)"
            },
            fertilization: {
                description: "Application of premium, season-appropriate fertilizer to promote healthy lawn growth and vibrant color. Tailored to Dallas, TX climate and soil conditions.",
                prices: { small: "$50-$70", medium: "$65-$90", large: "$85-$110", xlarge: "$100-$140" },
                name: "Fertilization"
            },
            weeding: {
                description: "Manual weeding of designated garden beds (up to specified square footage). Includes removal of common weeds. Does not include chemical treatments unless specified.",
                prices: { small: "$40-$55 (per hour/small bed)", medium: "$50-$70 (per hour/medium bed)", large: "$60-$85 (per hour/large bed)", xlarge: "$70-$95 (per hour/xl bed)" },
                name: "Weed Control (Garden Bed Weeding)"
            }
        };

        let mockProviders = [
            {
                id: 6, 
                name: "Gecko Green Lawn Care",
                rating: 4.8, 
                reviewsCount: 4448, 
                imageUrl: "https://placehold.co/400x300/2E8B57/FFFFFF?text=Gecko+Green+Lawn", 
                galleryImages: [
                    "https://placehold.co/600x400/2E8B57/FFFFFF?text=Gecko+Green%3A+Yard+1",
                    "https://placehold.co/600x400/3CB371/FFFFFF?text=Gecko+Green%3A+Service",
                    "https://placehold.co/600x400/66CDAA/FFFFFF?text=Gecko+Green%3A+Happy+Customer"
                ],
                mockReviews: [
                    { author: "J. Smith", rating: 5, comment: "Gecko Green transformed my lawn! Very professional and knowledgeable. Their team was courteous and the results speak for themselves. Best lawn care in Dallas!" },
                    { author: "Maria L.", rating: 4, comment: "Good reliable service. My lawn is definitely greener. A bit on the pricey side but they are thorough." },
                    { author: "David P.", rating: 5, comment: "Used them for fertilization and weed control. Significant improvement in just a few weeks. Highly recommend their expertise." }
                ],
                servicesOffered: ["mowing", "fertilization", "weeding", "mowingPlus"], 
                basePriceModifier: 1.1, 
                bio: "Locally-owned & service-first! Premier professional lawn care in North Texas. With over 20 years of experience, we make lawn care easy from a team you can trust. We tailor services to your lawn's needs and the unique climate of North Texas!",
                availability: "Call for schedule",
                address: "Serves Dallas, TX", 
                phone: "(972) 899-9249", 
                website: "geckogreen.com" 
            },
            {
                id: 1,
                name: "GreenThumb Experts",
                rating: 4.8,
                reviewsCount: 150,
                imageUrl: "https://placehold.co/400x300/A3E6B4/333333?text=Lush+Green+Lawn",
                galleryImages: [
                    "https://placehold.co/600x400/A3E6B4/333333?text=Lawn+View+1",
                    "https://placehold.co/600x400/A8D5BA/333333?text=Garden+Work",
                    "https://placehold.co/600x400/B0C9BE/333333?text=Happy+Client+Yard"
                ],
                mockReviews: [
                    { author: "Sarah K.", rating: 5, comment: "Absolutely fantastic job! My lawn has never looked better. Very professional and on time." },
                    { author: "Mike R.", rating: 4, comment: "Good service, reliable. A bit pricey but the quality is there." }
                ],
                servicesOffered: ["mowing", "fertilization", "weeding", "mowingPlus"],
                basePriceModifier: 1.0, 
                bio: "Your local experts for a lush, healthy lawn. Serving Dallas for 10+ years with dedication and eco-friendly options.",
                availability: "Next available: Tomorrow"
            },
            {
                id: 2,
                name: "Precision Lawn Care Dallas",
                rating: 4.5,
                reviewsCount: 85,
                imageUrl: "https://placehold.co/400x300/9AE6B4/333333?text=Pro+Mowing+Service",
                 galleryImages: [
                    "https://placehold.co/600x400/9AE6B4/333333?text=Striped+Lawn",
                    "https://placehold.co/600x400/A0D9BB/333333?text=Edging+Detail"
                ],
                mockReviews: [
                    { author: "Linda B.", rating: 5, comment: "Very precise work, they live up to their name. My edges are perfect." }
                ],
                servicesOffered: ["mowing", "mowingPlus"],
                basePriceModifier: 1.1, 
                bio: "Meticulous mowing and edging. We treat every lawn like our own, ensuring picture-perfect results every time.",
                availability: "Available from: Next Monday"
            },
            {
                id: 3,
                name: "Budget Cuts Lawn Service",
                rating: 4.2,
                reviewsCount: 210,
                imageUrl: "https://placehold.co/400x300/B3E6B4/333333?text=Friendly+Lawn+Team",
                galleryImages: ["https://placehold.co/600x400/B3E6B4/333333?text=Affordable+Care"],
                mockReviews: [
                    { author: "Tom H.", rating: 4, comment: "Great value for the price. Does a good job with basic mowing." },
                    { author: "Emily S.", rating: 4, comment: "Reliable and affordable, exactly what I needed." }
                ],
                servicesOffered: ["mowing"],
                basePriceModifier: 0.9, 
                bio: "Affordable and reliable lawn mowing services for the Dallas area. Quality work that doesn't break the bank.",
                availability: "Next available: In 2 days"
            }
        ];

        // --- View Management ---
        const views = document.querySelectorAll('.view');
        const navLinks = document.querySelectorAll('.nav-link');
        const siteTitleLink = document.querySelector('.site-title');
        let currentZipCode = "Dallas, TX"; 
        let currentServiceSelection = "all"; 
        let currentYardSizeSelection = "any";
        let currentSortBy = "rating";
        let currentProviderId = null; 

        function setActiveView(viewId, data = {}) {
            views.forEach(view => {
                view.classList.toggle('active', view.id === viewId);
            });
            
            navLinks.forEach(link => {
                link.classList.toggle('active-nav', link.getAttribute('href') === `#${viewId.replace('View','')}`);
            });

            if (viewId === 'exploreServicesView') {
                const exploreZipDisplay = document.getElementById('exploreServicesZipDisplay');
                if (data.zip && exploreZipDisplay) {
                    currentZipCode = data.zip;
                    exploreZipDisplay.textContent = `Zip Code ${currentZipCode}`;
                } else if (exploreZipDisplay) {
                    exploreZipDisplay.textContent = `Zip Code ${currentZipCode}`; 
                }
                
                const filterServiceType = document.getElementById('filterServiceType');
                if (data.service && filterServiceType) {
                    currentServiceSelection = data.service;
                    filterServiceType.value = currentServiceSelection;
                } else if (filterServiceType) {
                    filterServiceType.value = currentServiceSelection; 
                }
                
                const filterYardSize = document.getElementById('filterYardSize');
                if(filterYardSize) filterYardSize.value = currentYardSizeSelection;

                const filterSortBy = document.getElementById('filterSortBy');
                if(filterSortBy) filterSortBy.value = currentSortBy;
                
                renderProviders(); 
            } else if (viewId === 'providerProfileView' && data.providerId) {
                currentProviderId = data.providerId;
                renderProviderProfile(currentProviderId);
            }
            window.scrollTo(0, 0);
        }
        
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetViewId = e.target.getAttribute('href').substring(1) + "View";
                const data = (targetViewId === 'providerProfileView' && currentProviderId) ? { providerId: currentProviderId } : { zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy };
                setActiveView(targetViewId, data);
                history.pushState({view: targetViewId, ...data}, "", e.target.getAttribute('href'));
            });
        });

        if (siteTitleLink) {
            siteTitleLink.addEventListener('click', (e) => {
                e.preventDefault();
                setActiveView('homeView');
                history.pushState({view: 'homeView'}, "", "#home");
            });
        }
        
        window.addEventListener('popstate', (event) => {
            const targetView = (event.state && event.state.view) ? event.state.view : 'homeView';
            const data = event.state || {};
            if(data.zip) currentZipCode = data.zip;
            if(data.service) currentServiceSelection = data.service;
            if(data.yardSize) currentYardSizeSelection = data.yardSize;
            if(data.sortBy) currentSortBy = data.sortBy;
            if(data.providerId) currentProviderId = data.providerId; 
            setActiveView(targetView, data);
        });

        // --- Homepage Specific JS ---
        const zipCodeForm = document.getElementById('zipCodeForm');
        const zipCodeInput = document.getElementById('zipCodeInput');
        const zipError = document.getElementById('zipError');
        const categoryLinks = document.querySelectorAll('.category-link');

        if (zipCodeForm) {
            zipCodeForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const zip = zipCodeInput.value.trim();
                zipError.textContent = ''; 
                if (/^\d{5}$/.test(zip)) {
                    currentZipCode = zip;
                    const preselectedService = this.dataset.preselectedService || "all";
                    delete this.dataset.preselectedService;

                    setActiveView('exploreServicesView', { zip: currentZipCode, service: preselectedService });
                    history.pushState({view: 'exploreServicesView', zip: currentZipCode, service: preselectedService, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", "#exploreServices");
                } else {
                    zipError.textContent = 'Please enter a valid 5-digit Zip Code.';
                }
            });
        }
        
        categoryLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const service = this.dataset.service;
                currentServiceSelection = service;
                const currentZipVal = zipCodeInput.value.trim();

                if (currentZipVal && /^\d{5}$/.test(currentZipVal)) {
                    currentZipCode = currentZipVal;
                    setActiveView('exploreServicesView', { zip: currentZipCode, service: currentServiceSelection });
                    history.pushState({view: 'exploreServicesView', zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", "#exploreServices");
                } else { 
                    zipCodeInput.focus();
                    zipError.textContent = 'Please enter your Zip Code to see services.';
                    if(zipCodeForm) zipCodeForm.dataset.preselectedService = service;
                }
            });
        });

        // --- Explore Services View Specific JS ---
        const filterServiceTypeSelect = document.getElementById('filterServiceType');
        const filterYardSizeSelect = document.getElementById('filterYardSize');
        const filterSortBySelect = document.getElementById('filterSortBy');
        const providerListingsContainer = document.getElementById('providerListingsContainer');
        const noProvidersMessage = document.getElementById('noProvidersMessage');
        
        const bookingDemoExploreSection = document.getElementById('bookingDemoExplore');
        const bookedServiceDisplayExplore = document.getElementById('bookedServiceDisplayExplore');
        const bookedYardSizeDisplayExplore = document.getElementById('bookedYardSizeDisplayExplore');
        const bookedPriceDisplayExplore = document.getElementById('bookedPriceDisplayExplore');
        const showBookingConfirmationBtnExplore = document.getElementById('showBookingConfirmationBtnExplore');
        const bookingConfirmationExploreDiv = document.getElementById('bookingConfirmationExplore');
        const confirmProviderNameEl = document.getElementById('confirmProviderName');
        const bookingProviderNameEl = document.getElementById('bookingProviderName');

        function calculateProviderPriceRange(provider, serviceKey, yardSizeKey) {
            if (!serviceData[serviceKey]) return "Service N/A";
            const service = serviceData[serviceKey];
            let priceString = service.prices[yardSizeKey] || "N/A for this size";

            if (priceString !== "N/A for this size" && priceString.includes('-')) {
                const parts = priceString.replace(/\$/g, '').split('-');
                const minPrice = parseFloat(parts[0]) * provider.basePriceModifier;
                const maxPrice = parseFloat(parts[1]) * provider.basePriceModifier;
                return `$${minPrice.toFixed(0)}-$${maxPrice.toFixed(0)}`;
            } else if (priceString !== "N/A for this size") {
                 const singlePrice = parseFloat(priceString.replace(/\$/g, '').split(' ')[0]) * provider.basePriceModifier;
                 return `$${singlePrice.toFixed(0)} ${priceString.split(' ').slice(1).join(' ')}`;
            }
            return priceString;
        }

        function renderProviders() {
            if (!providerListingsContainer) return;
            providerListingsContainer.innerHTML = ''; 

            let filteredProviders = mockProviders.filter(provider => {
                if (currentServiceSelection === 'all') return true;
                return provider.servicesOffered.includes(currentServiceSelection);
            });

            if (currentSortBy === 'rating') {
                filteredProviders.sort((a, b) => b.rating - a.rating);
            } else if (currentSortBy === 'reviews') {
                filteredProviders.sort((a, b) => b.reviewsCount - a.reviewsCount);
            } else if (currentSortBy === 'name_asc') {
                filteredProviders.sort((a, b) => a.name.localeCompare(b.name));
            }

            if (filteredProviders.length === 0) {
                if(noProvidersMessage) noProvidersMessage.classList.remove('hidden');
            } else {
                 if(noProvidersMessage) noProvidersMessage.classList.add('hidden');
            }

            filteredProviders.forEach(provider => {
                const listItem = document.createElement('div');
                listItem.className = 'provider-list-item p-6 flex flex-col sm:flex-row gap-6 items-start'; 
                listItem.id = `provider-item-${provider.id}`;
                
                const effectiveServiceKey = currentServiceSelection === 'all' ? provider.servicesOffered[0] : currentServiceSelection;
                const effectiveYardSizeKey = currentYardSizeSelection === 'any' ? 'medium' : currentYardSizeSelection;
                const displayPriceRange = calculateProviderPriceRange(provider, effectiveServiceKey, effectiveYardSizeKey);

                let specialtiesHTML = provider.servicesOffered.map(serviceKey => {
                    const serviceDetail = serviceData[serviceKey];
                    return `<span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full mr-1 mb-1 inline-block">${serviceDetail ? serviceDetail.name.split('(')[0].trim() : serviceKey}</span>`;
                }).join('');
                
                const imageHTML = `<img src="${provider.imageUrl}" alt="${provider.name}" class="w-full sm:w-40 h-40 object-cover rounded-lg shadow-md flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/400x300/FEE2E2/B91C1C?text=Image+Error';this.classList.add('provider-image-placeholder');this.style.backgroundColor='#FEE2E2'; this.style.color='#B91C1C';">`;

                listItem.innerHTML = `
                    ${imageHTML}
                    <div class="flex-grow">
                        <h4 class="text-2xl font-semibold mb-1 text-gray-800">${provider.name}</h4>
                        <div class="star-rating text-sm text-gray-600 mb-2 flex items-center">
                            <span>${'‚òÖ'.repeat(Math.floor(provider.rating))}${'‚òÜ'.repeat(5 - Math.floor(provider.rating))}</span>
                            <span class="ml-2">${provider.rating.toFixed(1)} (${provider.reviewsCount} reviews)</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-3">${provider.bio.substring(0,100)}...</p>
                        <div class="mb-3">
                            <strong class="text-xs text-gray-500 uppercase">Specialties:</strong>
                            <div class="mt-1">${specialtiesHTML}</div>
                        </div>
                        <div class="mb-3">
                             <strong class="text-xs text-gray-500 uppercase">Availability:</strong>
                             <p class="text-sm text-gray-700">${provider.availability}</p>
                        </div>
                         <div class="mb-4">
                             <strong class="text-xs text-gray-500 uppercase">Est. Price for Selected Service:</strong>
                             <p class="text-xl font-bold accent-green">${displayPriceRange}</p>
                             <p class="text-xs text-gray-500">(for ${serviceData[effectiveServiceKey] ? serviceData[effectiveServiceKey].name : 'selected service'} / ${effectiveYardSizeKey} yard)</p>
                        </div>
                        <button data-provider-id="${provider.id}" class="view-provider-profile-btn button button-primary w-full sm:w-auto text-sm">View Profile & Book</button>
                    </div>
                `;
                providerListingsContainer.appendChild(listItem);
            });

            document.querySelectorAll('.view-provider-profile-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const providerId = parseInt(this.dataset.providerId);
                    currentProviderId = providerId; 
                    setActiveView('providerProfileView', { providerId: providerId });
                    history.pushState({view: 'providerProfileView', providerId: providerId, zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", `#providerProfile?id=${providerId}`);
                });
            });
        }

        // --- Provider Profile View JS ---
        const providerProfileContentContainer = document.getElementById('providerProfileContentContainer');
        const backToProvidersButton = document.getElementById('backToProvidersButton');
        const backToProfileButton = document.getElementById('backToProfileButton');


        if (backToProvidersButton) {
            backToProvidersButton.addEventListener('click', () => {
                setActiveView('exploreServicesView', {zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy});
                history.pushState({view: 'exploreServicesView', zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", "#exploreServices");
            });
        }
        if (backToProfileButton) {
            backToProfileButton.addEventListener('click', () => {
                if (currentProviderId) { 
                     setActiveView('providerProfileView', { providerId: currentProviderId });
                     history.pushState({view: 'providerProfileView', providerId: currentProviderId, zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", `#providerProfile?id=${currentProviderId}`);
                } else {
                    setActiveView('exploreServicesView', {zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy});
                    history.pushState({view: 'exploreServicesView', zip: currentZipCode, service: currentServiceSelection, yardSize: currentYardSizeSelection, sortBy: currentSortBy}, "", "#exploreServices");
                }
            });
        }

        function renderProviderProfile(providerId) {
            if (!providerProfileContentContainer) return;
            const provider = mockProviders.find(p => p.id === providerId);
            if (!provider) {
                providerProfileContentContainer.innerHTML = `<p class="text-red-500 text-center py-10">Provider not found. Please try again.</p>`;
                return;
            }

            let galleryHTML = '<div class="profile-gallery-grid mb-8">';
            if (provider.galleryImages && provider.galleryImages.length > 0) {
                provider.galleryImages.forEach(imgUrl => {
                    galleryHTML += `<img src="${imgUrl}" alt="${provider.name} work sample" class="profile-gallery-image w-full object-cover rounded-md shadow hover:shadow-lg transition-shadow" onerror="this.onerror=null;this.src='https://placehold.co/400x300/FEE2E2/B91C1C?text=Gallery+Img+Err';">`;
                });
            } else {
                for(let i=0; i < 3; i++) { 
                    galleryHTML += `<div class="profile-gallery-image">Placeholder Image ${i+1}</div>`;
                }
            }
            galleryHTML += '</div>';

            let reviewsHTML = '<h3 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-3">Customer Reviews</h3>';
            if (provider.mockReviews && provider.mockReviews.length > 0) {
                provider.mockReviews.forEach(review => {
                    reviewsHTML += `
                        <div class="review-item">
                            <div class="flex items-center mb-2">
                                <p class="review-author text-gray-800">${review.author}</p>
                                <div class="review-rating text-sm ml-auto">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5 - review.rating)}</div>
                            </div>
                            <p class="text-md text-gray-600 leading-relaxed">${review.comment}</p>
                        </div>
                    `;
                });
            } else {
                reviewsHTML += `<p class="text-md text-gray-500">No reviews yet for ${provider.name}.</p>`;
            }

            let serviceOptionsHTML = provider.servicesOffered.map(serviceKey => {
                const serviceDetail = serviceData[serviceKey];
                return `<option value="${serviceKey}">${serviceDetail ? serviceDetail.name : serviceKey}</option>`;
            }).join('');
            
            const initialProfileServiceKey = provider.servicesOffered.includes(currentServiceSelection) && currentServiceSelection !== 'all' ? currentServiceSelection : provider.servicesOffered[0];
            const initialProfileYardSizeKey = currentYardSizeSelection !== 'any' ? currentYardSizeSelection : 'medium';
            
            providerProfileContentContainer.innerHTML = `
                <div class="grid md:grid-cols-12 gap-8">
                    <div class="md:col-span-4">
                        <img src="${provider.imageUrl}" alt="${provider.name}" class="w-full h-auto max-h-80 object-cover rounded-lg shadow-xl mb-6" onerror="this.onerror=null;this.src='https://placehold.co/600x400/FEE2E2/B91C1C?text=Main+Image+Error';">
                        <h2 class="text-3xl lg:text-4xl font-bold text-gray-800 mb-2">${provider.name}</h2>
                        <div class="star-rating text-lg text-gray-600 mb-3 flex items-center">
                            <span>${'‚òÖ'.repeat(Math.floor(provider.rating))}${'‚òÜ'.repeat(5 - Math.floor(provider.rating))}</span>
                            <span class="ml-2">${provider.rating.toFixed(1)} (${provider.reviewsCount} reviews)</span>
                        </div>
                        <p class="text-md text-gray-600 mb-4 leading-relaxed">${provider.bio}</p>
                        <p class="text-sm text-gray-500 mb-1"><strong class="font-medium text-gray-700">Availability:</strong> ${provider.availability}</p>
                         ${provider.phone ? `<p class="text-sm text-gray-500 mb-1"><strong class="font-medium text-gray-700">Phone:</strong> <a href="tel:${provider.phone}" class="accent-blue hover:underline">${provider.phone}</a></p>` : ''}
                         ${provider.website ? `<p class="text-sm text-gray-500 mb-4"><strong class="font-medium text-gray-700">Website:</strong> <a href="https://${provider.website}" target="_blank" rel="noopener noreferrer" class="accent-blue hover:underline">${provider.website}</a></p>` : ''}
                         ${provider.address ? `<p class="text-sm text-gray-500"><strong class="font-medium text-gray-700">Serves:</strong> ${provider.address}</p>` : ''}
                    </div>
                    <div class="md:col-span-8">
                        <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 mb-8">
                            <h3 class="text-2xl font-semibold mb-4 text-gray-800">Get a Price Estimate & Book</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-4">
                                <div>
                                    <label for="profileServiceType" class="block text-sm font-medium text-gray-700 mb-1">Select Service:</label>
                                    <select id="profileServiceType" class="mt-1 block w-full">
                                        ${serviceOptionsHTML}
                                    </select>
                                </div>
                                <div>
                                    <label for="profileYardSize" class="block text-sm font-medium text-gray-700 mb-1">Estimated Yard Size:</label>
                                    <select id="profileYardSize" class="mt-1 block w-full">
                                        <option value="small">Small (under 3,000 sq ft)</option>
                                        <option value="medium">Medium (3,000 - 7,000 sq ft)</option>
                                        <option value="large">Large (7,000 - 10,000 sq ft)</option>
                                        <option value="xlarge">Extra Large (10,000+ sq ft)</option>
                                    </select>
                                </div>
                            </div>
                            <div id="profileServiceDetailsDisplay" class="p-4 bg-green-50 rounded-md text-left border border-green-200">
                                <h4 class="font-semibold text-lg accent-green mb-1">Service Details:</h4>
                                <p id="profileServiceDescription" class="text-sm text-gray-700 mt-1 mb-2">Select a service and yard size.</p>
                                <p class="text-lg font-bold">Estimated Price: <span id="profilePriceRange" class="accent-green text-xl">$--</span></p>
                            </div>
                            <button id="bookThisProviderBtn" data-provider-id="${provider.id}" class="button button-primary w-full mt-6 text-lg">Request Booking with ${provider.name}</button>
                        </div>
                        
                        <div class="mb-8">
                            <h3 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-3">Photo Gallery</h3>
                            ${galleryHTML}
                        </div>
                        
                        <div>
                            ${reviewsHTML}
                        </div>
                    </div>
                </div>
            `;
            
            const profileServiceTypeSelect = document.getElementById('profileServiceType');
            const profileYardSizeSelect = document.getElementById('profileYardSize');
            if(profileServiceTypeSelect) profileServiceTypeSelect.value = initialProfileServiceKey;
            if(profileYardSizeSelect) profileYardSizeSelect.value = initialProfileYardSizeKey;
            updateProfilePriceDetails(provider); 

            if(profileServiceTypeSelect) profileServiceTypeSelect.addEventListener('change', () => updateProfilePriceDetails(provider));
            if(profileYardSizeSelect) profileYardSizeSelect.addEventListener('change', () => updateProfilePriceDetails(provider));

            document.getElementById('bookThisProviderBtn').addEventListener('click', function() {
                const selectedServiceKey = document.getElementById('profileServiceType').value;
                const selectedYardSizeKey = document.getElementById('profileYardSize').value;
                const priceString = document.getElementById('profilePriceRange').textContent;
                
                handleProceedToBookFromProfile(provider, selectedServiceKey, selectedYardSizeKey, priceString);
            });
        }

        function updateProfilePriceDetails(provider) {
            const serviceSelect = document.getElementById('profileServiceType');
            const yardSelect = document.getElementById('profileYardSize');
            const descriptionEl = document.getElementById('profileServiceDescription');
            const priceEl = document.getElementById('profilePriceRange');

            if (!serviceSelect || !yardSelect || !descriptionEl || !priceEl || !provider) return;

            const selectedServiceKey = serviceSelect.value;
            const selectedYardSizeKey = yardSelect.value;
            
            const service = serviceData[selectedServiceKey];
            if (service) {
                descriptionEl.textContent = service.description;
                priceEl.textContent = calculateProviderPriceRange(provider, selectedServiceKey, selectedYardSizeKey);
                const bookBtn = document.getElementById('bookThisProviderBtn');
                if(bookBtn) {
                    bookBtn.dataset.serviceKey = selectedServiceKey;
                    bookBtn.dataset.yardSizeKey = selectedYardSizeKey;
                    bookBtn.dataset.priceString = priceEl.textContent;
                }
            } else {
                descriptionEl.textContent = "Select a service.";
                priceEl.textContent = "$--";
            }
        }
        
        function handleProceedToBookFromProfile(provider, serviceKey, yardSizeKey, priceString) {
            const service = serviceData[serviceKey];
            const yardSizeSelectEl = document.getElementById('profileYardSize');
            const yardSizeText = Array.from(yardSizeSelectEl.options).find(opt => opt.value === yardSizeKey)?.text || yardSizeKey;

            if (provider && service && bookingDemoExploreSection) {
                if(confirmProviderNameEl) confirmProviderNameEl.textContent = provider.name;
                if(bookingProviderNameEl) bookingProviderNameEl.textContent = provider.name;
                if(bookedServiceDisplayExplore) bookedServiceDisplayExplore.textContent = service.name;
                if(bookedYardSizeDisplayExplore) bookedYardSizeDisplayExplore.textContent = yardSizeText;
                if(bookedPriceDisplayExplore) bookedPriceDisplayExplore.textContent = priceString;
                
                setActiveView('bookingDemoExplore', { providerId: provider.id, service: serviceKey, yardSize: yardSizeKey, price: priceString });
                history.pushState({view: 'bookingDemoExplore', providerId: provider.id, service: serviceKey, yardSize: yardSizeKey, price: priceString, zip: currentZipCode, sortBy: currentSortBy}, "", `#booking?provider=${provider.id}&service=${serviceKey}`);
            }
        }

        if (filterServiceTypeSelect) filterServiceTypeSelect.addEventListener('change', (e) => { currentServiceSelection = e.target.value; renderProviders(); });
        if (filterYardSizeSelect) filterYardSizeSelect.addEventListener('change', (e) => { currentYardSizeSelection = e.target.value; renderProviders(); });
        if (filterSortBySelect) filterSortBySelect.addEventListener('change', (e) => { currentSortBy = e.target.value; renderProviders(); });
        
        if (showBookingConfirmationBtnExplore) {
            showBookingConfirmationBtnExplore.addEventListener('click', () => {
                 if(bookingConfirmationExploreDiv) bookingConfirmationExploreDiv.classList.remove('hidden');
            });
        }
        
        const providerLoginForm = document.getElementById('providerLoginForm');
        if (providerLoginForm) {
            providerLoginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Provider login attempt (demo). In a real app, this would authenticate.');
            });
        }
        
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        document.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1); 
            let initialViewId = 'homeView';
            let initialData = {};
            const params = new URLSearchParams(hash.split('?')[1]);

            if (hash.startsWith('providerProfile')) {
                initialViewId = 'providerProfileView';
                initialData.providerId = parseInt(params.get('id'));
                currentProviderId = initialData.providerId; 
                if (history.state) {
                    currentZipCode = history.state.zip || "Dallas, TX";
                    currentServiceSelection = history.state.service || "all";
                    currentYardSizeSelection = history.state.yardSize || "any";
                    currentSortBy = history.state.sortBy || "rating";
                }
            } else if (hash === 'exploreServices') {
                initialViewId = 'exploreServicesView';
                if (history.state) { 
                    initialData.zip = history.state.zip;
                    initialData.service = history.state.service;
                    currentYardSizeSelection = history.state.yardSize || "any";
                    currentSortBy = history.state.sortBy || "rating";
                }
            } else if (hash === 'providers') {
                initialViewId = 'providersView';
            } else if (hash.startsWith('booking')) {
                initialViewId = 'bookingDemoExplore';
                initialData.providerId = parseInt(params.get('provider'));
                initialData.service = params.get('service');
                currentProviderId = initialData.providerId;
                
                const provider = mockProviders.find(p => p.id === initialData.providerId);
                const service = serviceData[initialData.service];
                if(provider && service && confirmProviderNameEl && bookingProviderNameEl && bookedServiceDisplayExplore && bookedPriceDisplayExplore) {
                    confirmProviderNameEl.textContent = provider.name;
                    bookingProviderNameEl.textContent = provider.name;
                    bookedServiceDisplayExplore.textContent = service.name;
                    const yardSizeForBooking = (history.state && history.state.yardSize) ? history.state.yardSize : 'medium'; 
                    const priceForBooking = (history.state && history.state.price) ? history.state.price : calculateProviderPriceRange(provider, initialData.service, yardSizeForBooking);
                    bookedPriceDisplayExplore.textContent = priceForBooking;
                    const yardSizeSelectEl = document.getElementById('filterYardSize'); 
                    if(bookedYardSizeDisplayExplore && yardSizeSelectEl) bookedYardSizeDisplayExplore.textContent = Array.from(yardSizeSelectEl.options).find(opt => opt.value === yardSizeForBooking)?.text || yardSizeForBooking;
                }
            } else { 
                 history.replaceState({view: 'homeView'}, "", "#home");
            }
            setActiveView(initialViewId, initialData);
        });

    </script>
</body>
</html>
